# üìë Sommaire ‚Äî Workflow *Deploy Sentinel Monitoring*

1. **D√©clencheurs (`on`)**

    * 1.1 Intro, roadmap & objectif
    * 1.2 Lancement manuel (`workflow_dispatch`)
    * 1.2 Lancement auto sur push dans `main` si `sentinel/**` ou le workflow changent

2. **Concurrence (`concurrency`)**

    * 2.0 Emp√™che les ex√©cutions multiples
    * 2.0 Annule le run pr√©c√©dent si un nouveau arrive

3. **Secrets & Variables requis**

    * 3.0 Git secrets et variables

4. **√âtapes du job**

    * 4.0. **Bootstrap serveur** (install Docker/Compose si manquant)
    * 4.1. **Install sshpass** (pour `rsync` en mode mot de passe)
    * 4.2. **Ensure target dir** (`/root/sentinel`)
    * 4.3. **Checkout repo**
    * 4.4. **Rsync du dossier sentinel/** ‚Üí `/root/sentinel/`
    * 4.5. **Compose deploy**
    * 4.6. **Health checks** (Prometheus, Loki, Grafana)

5. **Comportement attendu**

    * 5.0 Toute modif dans `sentinel/` ‚Üí red√©ploiement auto
    * 5.0 Provisioning Grafana appliqu√© automatiquement
    * 5.1 Cas limites et erreurs

6. **D√©pannage rapide**

    * Debug listing
    * Erreur rsync
    * Datasource Grafana manquante
    * Services non ready
    * YAML provisioning non appliqu√©

7. **Bonnes pratiques**

    * Variables sensibles dans GitHub Secrets
    * Volumes nomm√©s pour persistance
    * Provisioning Grafana avec `delete*` pour forcer la synchro
    * Idempotence : relancer le workflow = √©tat attendu identique

8. **Synth√®se & Conclusion**